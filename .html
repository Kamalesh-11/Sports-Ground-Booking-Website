<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Sports Ground Booking App</title>
        <style>
          body {
            font-family: "Segoe UI", sans-serif;
            background: #f8f9fa;
            margin: 0;
            padding: 0;
          }

          header {
            background: #0078d7;
            color: #fff;
            padding: 1rem;
            text-align: center;
          }

          main {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 1rem;
          }

          h2 {
            color: #333;
            margin-bottom: 1rem;
          }

          .ground-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
          }

          .card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 1rem;
            text-align: center;
          }

          .card h3 {
            margin-top: 0;
            color: #0078d7;
          }

          .card p {
            margin: 0.3rem 0;
          }

          .btn {
            background: #0078d7;
            color: #fff;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 0.5rem;
          }

          .btn:hover {
            background: #005fa3;
          }

          /* Modal */
          .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
          }

          .modal-content {
            background: #fff;
            padding: 1.5rem;
            border-radius: 10px;
            width: 300px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
          }

          .modal-content h3 {
            margin-top: 0;
          }

          .form-group {
            margin-bottom: 0.8rem;
          }

          input[type="date"],
          input[type="time"] {
            width: 100%;
            padding: 0.4rem;
            border: 1px solid #ccc;
            border-radius: 4px;
          }

          .close {
            background: #ccc;
            color: #000;
            padding: 0.3rem 0.7rem;
            border-radius: 4px;
            cursor: pointer;
            float: right;
          }

          .my-bookings {
            margin-top: 2rem;
          }

          .booking-item {
            background: #fff;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
          }

          .cancel-btn {
            background: #d9534f;
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
          }

          .cancel-btn:hover {
            background: #b52b27;
          }
        </style>
      </head>
      <body>
        <header>
          <h1>üèüÔ∏è Sports Ground Booking</h1>
        </header>

        <main>
          <section>
            <h2>Available Grounds</h2>
            <div class="ground-list" id="groundList"></div>
          </section>

          <section class="my-bookings">
            <h2>My Bookings</h2>
            <div id="bookingsList"></div>
          </section>
        </main>

        <!-- Booking Modal -->
        <div class="modal" id="bookingModal">
          <div class="modal-content">
            <span class="close" onclick="closeModal()">‚úñ</span>
            <h3 id="modalGroundName"></h3>

            <div class="form-group">
              <label>Date:</label>
              <input type="date" id="dateInput" />
            </div>

            <div class="form-group">
              <label>Start Time:</label>
              <input type="time" id="startTimeInput" />
            </div>

            <div class="form-group">
              <label>End Time:</label>
              <input type="time" id="endTimeInput" />
            </div>

            <p id="costDisplay"></p>

            <button class="btn" onclick="confirmBooking()">
              Confirm Booking
            </button>
          </div>
        </div>

        <script>
          const grounds = [
            {
              id: 1,
              name: "City Cricket Ground",
              sport: "Cricket",
              pricePerHour: 400,
            },
            {
              id: 2,
              name: "Arena Football Turf",
              sport: "Football",
              pricePerHour: 300,
            },
            {
              id: 3,
              name: "Ace Badminton Hall",
              sport: "Badminton",
              pricePerHour: 200,
            },
          ];

          let selectedGround = null;

          function renderGrounds() {
            const list = document.getElementById("groundList");
            list.innerHTML = "";
            grounds.forEach((g) => {
              const card = document.createElement("div");
              card.className = "card";
              card.innerHTML = `
            <h3>${g.name}</h3>
            <p>Sport: ${g.sport}</p>
            <p> Price/hour: ‚Çπ${g.pricePerHour}</p>
            <button class="btn" onclick="openModal(${g.id})">Book</button>
          `;
              list.appendChild(card);
            });
          }

          function openModal(id) {
            selectedGround = grounds.find((g) => g.id === id);
            document.getElementById("modalGroundName").textContent =
              selectedGround.name;
            document.getElementById("bookingModal").style.display = "flex";
          }

          function closeModal() {
            document.getElementById("bookingModal").style.display = "none";
            document.getElementById("dateInput").value = "";
            document.getElementById("startTimeInput").value = "";
            document.getElementById("endTimeInput").value = "";
            document.getElementById("costDisplay").textContent = "";
          }

          function getBookings() {
            return JSON.parse(localStorage.getItem("bookings") || "[]");
          }

          function saveBookings(data) {
            localStorage.setItem("bookings", JSON.stringify(data));
          }

          function calculateCost(start, end, rate) {
            const hours =
              parseInt(end.split(":")[0]) - parseInt(start.split(":")[0]);
            return hours * rate;
          }

          function isOverlap(newBooking, existing) {
            return existing.some(
              (b) =>
                b.groundId === newBooking.groundId &&
                b.date === newBooking.date &&
                !(
                  newBooking.endTime <= b.startTime ||
                  newBooking.startTime >= b.endTime
                )
            );
          }

          function confirmBooking() {
            const date = document.getElementById("dateInput").value;
            const start = document.getElementById("startTimeInput").value;
            const end = document.getElementById("endTimeInput").value;

            if (!date || !start || !end) {
              alert("Please fill all fields!");
              return;
            }

            if (end <= start) {
              alert("End time must be after start time!");
              return;
            }

            const newBooking = {
              id: Date.now(),
              groundId: selectedGround.id,
              date,
              startTime: start,
              endTime: end,
            };

            const all = getBookings();

            if (isOverlap(newBooking, all)) {
              alert("This time slot is already booked!");
              return;
            }

            all.push(newBooking);
            saveBookings(all);
            alert("Booking Successful!");
            closeModal();
            renderBookings();
          }

          function renderBookings() {
            const bookings = getBookings();
            const list = document.getElementById("bookingsList");
            list.innerHTML = "";

            if (bookings.length === 0) {
              list.innerHTML = "<p>No bookings yet.</p>";
              return;
            }

            bookings.forEach((b) => {
              const ground = grounds.find((g) => g.id === b.groundId);
              const cost = calculateCost(
                b.startTime,
                b.endTime,
                ground.pricePerHour
              );
              const item = document.createElement("div");
              item.className = "booking-item";
              item.innerHTML = `
            <strong>${ground.name}</strong><br>
            Date: ${b.date}<br>
            Time: ${b.startTime} - ${b.endTime}<br>
            Total: ‚Çπ${cost}<br>
            <button class="cancel-btn" onclick="cancelBooking(${b.id})">Cancel</button>
          `;
              list.appendChild(item);
            });
          }

          function cancelBooking(id) {
            const updated = getBookings().filter((b) => b.id !== id);
            saveBookings(updated);
            renderBookings();
          }

          // Live cost preview
          document.addEventListener("input", (e) => {
            if (
              e.target.id === "endTimeInput" ||
              e.target.id === "startTimeInput"
            ) {
              const start = document.getElementById("startTimeInput").value;
              const end = document.getElementById("endTimeInput").value;
              if (start && end && end > start && selectedGround) {
                const cost = calculateCost(
                  start,
                  end,
                  selectedGround.pricePerHour
                );
                document.getElementById(
                  "costDisplay"
                ).textContent = ` Estimated Cost: ‚Çπ${cost}`;
              } else {
                document.getElementById("costDisplay").textContent = "";
              }
            }
          });

          renderGrounds();
          renderBookings();
        </script>
      </body>
    </html>
  </body>
</html>
